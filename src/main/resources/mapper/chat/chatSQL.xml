<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="chat">
	<!-- (소현)채팅방 생성 -->
	<insert id="createChat" parameterType="map">
		insert into chat
		values(chat_seq.nextval,#{sNo},#{userId},#{freeId})
	</insert>

	<!-- (소현)채팅방 번호 불러오기 -->
	<select id="selectOneRoom" parameterType="map" resultType="_int">
		select
		c_no as cNo
		from chat
		where s_no=#{sNo} and user_id=#{userId}
	</select>

	<!-- (소현)채팅방 불러오기 -->
	<select id="roomList" parameterType="String" resultType="c">
		select
		c_no as cNo,
		user_id as userId,
		freelancer_id as freelancerId
		from chat
		where user_id=#{_parameter}
	</select>

	<!-- (소현)보낸메세지 저장 -->
	<insert id="insertChat" parameterType="map">
		insert into chat_content
		values(chat_content_seq.nextval,#{cNo},#{myId},#{time},#{content},1)
	</insert>

	<!-- (소현)채팅방 삭제 -->
	<delete id="deleteChat" parameterType="_int">
		delete from chat where
		c_no=#{_parameter}
	</delete>
</mapper>
